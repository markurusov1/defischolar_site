<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/defischolar_site/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=defischolar_site/livereload" data-no-instant defer></script>
  <!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Example Illustration of Concentrated Liquidity in Uniswap v3 (BTC/ETH Pair)# Based on Section 2 of the Uniswap v3 whitepaper (“Concentrated Liquidity”), this is a simplified example using a BTC/ETH pool, where the price p is quoted as ETH per BTC (i.e., how many ETH are needed to buy 1 BTC; BTC is asset X, ETH is asset Y). This follows the paper’s math for virtual and real reserves, position solvency within ranges, and how positions activate/deactivate as price moves.
">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/defischolar_site/docs/uniswap/concentrated_liq/">
  <meta property="og:site_name" content="DeFi Scholar">
  <meta property="og:title" content="Concentrated Liquidity">
  <meta property="og:description" content="Example Illustration of Concentrated Liquidity in Uniswap v3 (BTC/ETH Pair)# Based on Section 2 of the Uniswap v3 whitepaper (“Concentrated Liquidity”), this is a simplified example using a BTC/ETH pool, where the price p is quoted as ETH per BTC (i.e., how many ETH are needed to buy 1 BTC; BTC is asset X, ETH is asset Y). This follows the paper’s math for virtual and real reserves, position solvency within ranges, and how positions activate/deactivate as price moves.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">


  <meta itemprop="name" content="Concentrated Liquidity">
  <meta itemprop="description" content="Example Illustration of Concentrated Liquidity in Uniswap v3 (BTC/ETH Pair)# Based on Section 2 of the Uniswap v3 whitepaper (“Concentrated Liquidity”), this is a simplified example using a BTC/ETH pool, where the price p is quoted as ETH per BTC (i.e., how many ETH are needed to buy 1 BTC; BTC is asset X, ETH is asset Y). This follows the paper’s math for virtual and real reserves, position solvency within ranges, and how positions activate/deactivate as price moves.">
  <meta itemprop="wordCount" content="954">

<title>Concentrated Liquidity | DeFi Scholar</title>
<link rel="icon" href="http://localhost:1313/defischolar_site/favicon.png" >
<link rel="manifest" href="http://localhost:1313/defischolar_site/manifest.json">
<link rel="canonical" href="http://localhost:1313/defischolar_site/docs/uniswap/concentrated_liq/">
<link rel="stylesheet" href="http://localhost:1313/defischolar_site/book.min.de560c44345cf0084702c0002756f29c4cb66637859c7c0fc5af45a9cc18ce3a.css" integrity="sha256-3lYMRDRc8AhHAsAAJ1bynEy2ZjeFnHwPxa9FqcwYzjo=" crossorigin="anonymous">


  <script defer src="http://localhost:1313/defischolar_site/fuse.min.js"></script>
  <script defer src="http://localhost:1313/defischolar_site/en.search.min.a01893cfff9dfc9ad17417b859de5d086706eb77b1d3781c8698586efc5dafb4.js" integrity="sha256-oBiTz/&#43;d/JrRdBe4Wd5dCGcG63ex03gchphYbvxdr7Q=" crossorigin="anonymous"></script>



  <style>
     
     
     

     
    :root, [data-theme="light"] {
         
        --book-bg: #fff;
        --book-text: #222;
        --book-panel-bg: #f7f7f7;
        --book-border: #eee;
        --book-menu-color: #222;
        --book-section-color: #000;
        --book-hint-bg: #f9f9f9;
        --book-code-bg: #f9f9f9;
        --book-code-text: #222;
    }

     
    :root body, [data-theme="light"] body {
        background: var(--book-bg);
        color: var(--book-text);
    }

     
    [data-theme="dark"] {
         
        --book-bg: #1e1e1e;
        --book-text: #eee;
        --book-panel-bg: #333;
        --book-border: #444;
        --book-menu-color: #eee;
        --book-section-color: #f7f7f7;
        --book-hint-bg: #2d2d2d;
        --book-code-bg: #2d2d2d;
        --book-code-text: #eee;
    }

     
    [data-theme="dark"] body {
        background: var(--book-bg);
        color: var(--book-text);
    }

     
     
     

    #theme-toggle {
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
        border-radius: 4px;
        margin-left: 12px;
        display: flex;
        align-items: center;
        justify-content: center;

         
        color: var(--book-text);
        transition: color 0.2s;
    }

    #theme-toggle .icon {
        width: 20px;
        height: 20px;
    }

     
    [data-theme="light"] #theme-toggle .sun { display: none; }
    [data-theme="light"] #theme-toggle .moon { display: block; }

    [data-theme="dark"] #theme-toggle .sun { display: block; }
    [data-theme="dark"] #theme-toggle .moon { display: none; }
</style>
</head>
<body dir="ltr" class="book-kind-page book-type-docs">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    
<aside class="book-menu">
  <div class="book-menu-content">
    
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="http://localhost:1313/defischolar_site/"><span>DeFi Scholar</span>
  </a>
</h2>


<div class="book-search hidden">
  <input id="book-search-input" type="text" 
    placeholder="Search"
    aria-label="Search"
    maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>













  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-34773b1ae38cae61a3da621e3aedd638" class="toggle"  />
    <label for="section-34773b1ae38cae61a3da621e3aedd638" class="flex">
      <a href="http://localhost:1313/defischolar_site/docs/start/" class="">
        Introduction</a>
      <img src="http://localhost:1313/defischolar_site/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/start/basic_terminology/" class="">
      Basic Terminology</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/currencies_and_trust/" class="">
      Currencies</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c7834300e345c6af4fe8ba1614e68c62" class="toggle"  />
    <label for="section-c7834300e345c6af4fe8ba1614e68c62" class="flex">
      <a role="button" class="">
        Blockchain</a>
      <img src="http://localhost:1313/defischolar_site/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/blockchain/intro_and_concepts/" class="">
      Intro and Concepts</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/blockchain/miners_and_ledger/" class="">
      Miners and Ledger</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/blockchain/sample_transaction/" class="">
      Sample Transaction</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-1e173b399e39960c431a50680d8dfd31" class="toggle"  />
    <label for="section-1e173b399e39960c431a50680d8dfd31" class="flex">
      <a href="http://localhost:1313/defischolar_site/docs/networks/" class="">
        Blockchain Networks</a>
      <img src="http://localhost:1313/defischolar_site/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/networks/top15/" class="">
      Top15</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/networks/the_big_three/" class="">
      The Big Three</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/networks/network_browsers/" class="">
      Network Browsers</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/networks/offchains/" class="">
      Offchains</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a6f937de2aa2e353b067b93487b7739b" class="toggle"  />
    <label for="section-a6f937de2aa2e353b067b93487b7739b" class="flex">
      <a href="http://localhost:1313/defischolar_site/docs/smart_contracts/" class="">
        Smart Contracts</a>
      <img src="http://localhost:1313/defischolar_site/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/smart_contracts/polymarket/" class="">
      Polymarket</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-10088853b33624006aabc13a97f706a4" class="toggle"  />
    <label for="section-10088853b33624006aabc13a97f706a4" class="flex">
      <a role="button" class="">
        Defi Basics</a>
      <img src="http://localhost:1313/defischolar_site/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/defi_basics/pools_farming/" class="">
      Liquidity pools and Yield Farming</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/defi_basics/staking/" class="">
      Staking</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/defi_basics/vaults/" class="">
      Vaults</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/defi_basics/amm/" class="">
      Automated Market Makers</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/defi_basics/collateralized_lending/" class="">
      Collateralized Lending</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/defi_basics/flash_loans/" class="">
      Flash loans</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/defi_basics/rwa/" class="">
      RWA - Real World Assets</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-86968454265bdfa8453ede0de31a21dc" class="toggle"  />
    <label for="section-86968454265bdfa8453ede0de31a21dc" class="flex">
      <a href="http://localhost:1313/defischolar_site/docs/trading/" class="">
        Trading</a>
      <img src="http://localhost:1313/defischolar_site/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/trading/l2-market-order/" class="">
      L2 Order Book</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/trading/margin-loans/" class="">
      Margin Loans</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/trading/market-making/" class="">
      Market Making</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0bec55acdb444c915e0bc07c6a020c5d" class="toggle" checked />
    <label for="section-0bec55acdb444c915e0bc07c6a020c5d" class="flex">
      <a href="http://localhost:1313/defischolar_site/docs/uniswap/" class="">
        Uniswap</a>
      <img src="http://localhost:1313/defischolar_site/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/uniswap/uniswap_competitors/" class="">
      Impermanent Loss</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/uniswap/aave_uniswap/" class="">
      AAVE and Uniswap</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/uniswap/impermanent_loss/" class="">
      Impermanent Loss</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/uniswap/concentrated_liq/" class="active">
      Concentrated Liquidity</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/uniswap/multiple_pools/" class="">
      Multiple Pools</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ad0f001a08f35aaae41256e1ef072b72" class="toggle"  />
    <label for="section-ad0f001a08f35aaae41256e1ef072b72" class="flex">
      <a role="button" class="">
        Research</a>
      <img src="http://localhost:1313/defischolar_site/icons/chevron-right.svg" class="book-icon" alt="Expand" />
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/research/benefits/" class="">
      Benefits</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="http://localhost:1313/defischolar_site/docs/research/portfolio_value_calculation/" class="">
      Portfolio Value Calculation</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>












<nav role="menu" id="theme-button">
    <button id="theme-toggle" aria-label="Toggle theme">
        <svg class="sun icon feather feather-sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
        <svg class="moon icon feather feather-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
    </button>
</nav>
</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>



  </div>
</aside>
 

    <div class="book-page">
      <header class="book-header hidden">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="http://localhost:1313/defischolar_site/icons/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>Concentrated Liquidity</h3>

  <label for="toc-control">
    
    <img src="http://localhost:1313/defischolar_site/icons/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#example-illustration-of-concentrated-liquidity-in-uniswap-v3-btceth-pair">Example Illustration of Concentrated Liquidity in Uniswap v3 (BTC/ETH Pair)</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h3 id="example-illustration-of-concentrated-liquidity-in-uniswap-v3-btceth-pair">Example Illustration of Concentrated Liquidity in Uniswap v3 (BTC/ETH Pair)<a class="anchor" href="#example-illustration-of-concentrated-liquidity-in-uniswap-v3-btceth-pair">#</a></h3>
<p>Based on Section 2 of the Uniswap v3 whitepaper (&ldquo;Concentrated Liquidity&rdquo;), this is a simplified example using a
BTC/ETH pool, where the price <em>p</em> is quoted as ETH per BTC (i.e., how many ETH are needed to buy 1 BTC; BTC is asset
X, ETH is asset Y). This follows the paper&rsquo;s math for virtual and real reserves, position solvency within ranges, and how positions activate/deactivate as price moves.</p>
<p>To keep calculations exact and illustrative, we&rsquo;ll assume:</p>
<ul>
<li>Each LP provides liquidity <em>L</em> = 1000 (a measure of position size/depth, as defined in the paper where <em>L</em> = √<em>k</em> for the virtual constant product curve).</li>
<li>Positions use price ranges with perfect squares for clean math (e.g., 1, 4, 9, 16, 25).</li>
<li>Swap fee tier = 0.3% (as mentioned in the paper; fees are paid on input amount and accrued to active positions).</li>
<li>Initial price <em>p</em> = 9 ETH per BTC (imaginary for simplicity; real-world BTC/ETH is ~20, but this doesn&rsquo;t change the mechanics).</li>
<li>A large price movement upward (BTC appreciates vs. ETH) caused by traders buying BTC (inputting ETH, outputting BTC).</li>
<li>Positions:
<ul>
<li><strong>LP1 (close to current price)</strong>: Range [4, 16] ETH per BTC. This is narrow around the initial price of 9.</li>
<li><strong>LP2 (deeper in the book, lower prices)</strong>: Range [1, 4] ETH per BTC. Far below the initial price (inactive initially).</li>
<li><strong>LP3 (deeper in the book, higher prices)</strong>: Range [16, 25] ETH per BTC. Far above the initial price (inactive initially).</li>
</ul>
</li>
<li>Only LP1 is active initially (since 4 ≤ 9 ≤ 16). LP2 and LP3 are inactive and hold only one asset each.</li>
<li>We&rsquo;ll simulate the price movement via <strong>two transactions</strong> (swaps) that cross ranges: one moving price from 9 to 16 (deactivating LP1), and another from 16 to 20 (activating LP3). This shows deactivation/activation. Swaps are computed segment-by-segment when crossing ranges, per the paper&rsquo;s concentrated liquidity model.</li>
</ul>
<p>Numbers are rounded to two decimals for readability (exact values from simulation).</p>
<h4 id="initial-state-before-any-transactions">Initial State (Before Any Transactions)<a class="anchor" href="#initial-state-before-any-transactions">#</a></h4>
<ul>
<li><strong>Current price</strong>: 9 ETH per BTC.</li>
<li><strong>Pool reserves</strong>: 133.33 BTC, 2000 ETH.</li>
<li><strong>Active positions</strong>: Only LP1 (provides all trading liquidity).</li>
<li><strong>Position details</strong> (size <em>L</em>, range, real reserves held; inactive positions hold single-asset reserves but don&rsquo;t contribute to trading):
<table>
  <thead>
      <tr>
          <th>LP</th>
          <th>L (Position Size)</th>
          <th>Range [p_a, p_b]</th>
          <th>Real Reserves (BTC)</th>
          <th>Real Reserves (ETH)</th>
          <th>Status</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>LP1</td>
          <td>1000</td>
          <td>[4, 16]</td>
          <td>83.33</td>
          <td>1000</td>
          <td>Active</td>
      </tr>
      <tr>
          <td>LP2</td>
          <td>1000</td>
          <td>[1, 4]</td>
          <td>0</td>
          <td>1000</td>
          <td>Inactive</td>
      </tr>
      <tr>
          <td>LP3</td>
          <td>1000</td>
          <td>[16, 25]</td>
          <td>50</td>
          <td>0</td>
          <td>Inactive</td>
      </tr>
  </tbody>
</table>
</li>
<li><strong>Notes</strong>: Real reserves follow Equation 2.2 from the paper. Total pool reserves sum all positions (including inactive). The spot price is determined only by active positions&rsquo; virtual reserves (here, LP1&rsquo;s virtual curve gives exactly p=9). Fees paid: N/A (no transaction yet).</li>
</ul>
<h4 id="transaction-1-swap-eth-for-btc-to-move-price-from-9-to-16">Transaction 1: Swap ETH for BTC to Move Price from 9 to 16<a class="anchor" href="#transaction-1-swap-eth-for-btc-to-move-price-from-9-to-16">#</a></h4>
<ul>
<li><strong>Description</strong>: A trader inputs ETH to buy BTC, moving the price up to the upper bound of LP1&rsquo;s range (16 ETH per BTC). This uses only LP1&rsquo;s liquidity (as it&rsquo;s the only active position). Once the price hits 16, LP1 deactivates (its reserves shift to 100% ETH, per the paper—it can no longer support upward trades).</li>
<li><strong>Input</strong>: 1003.01 ETH (gross; trader pays this to the pool).</li>
<li><strong>Output</strong>: 83.33 BTC.</li>
<li><strong>Fees paid</strong>: 3.01 ETH (0.3% of input; accrued to LP1 as it was active during the trade).</li>
<li><strong>New price</strong>: 16 ETH per BTC.</li>
<li><strong>New pool reserves</strong>: 50 BTC, 3003.01 ETH.</li>
<li><strong>New position details</strong> (real reserves are base formula values; accrued fees are extra claimable by LPs but remain in pool reserves):
<table>
  <thead>
      <tr>
          <th>LP</th>
          <th>L (Position Size)</th>
          <th>Range [p_a, p_b]</th>
          <th>Real Reserves (BTC)</th>
          <th>Real Reserves (ETH)</th>
          <th>Status</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>LP1</td>
          <td>1000</td>
          <td>[4, 16]</td>
          <td>0</td>
          <td>2000 (+3.01 fees)</td>
          <td>Inactive (deactivated)</td>
      </tr>
      <tr>
          <td>LP2</td>
          <td>1000</td>
          <td>[1, 4]</td>
          <td>0</td>
          <td>1000</td>
          <td>Inactive</td>
      </tr>
      <tr>
          <td>LP3</td>
          <td>1000</td>
          <td>[16, 25]</td>
          <td>50</td>
          <td>0</td>
          <td>Inactive (but activates at 16 for further upward moves)</td>
      </tr>
  </tbody>
</table>
</li>
<li><strong>Notes</strong>: LP1 deactivated as price exited its range upward (reserves now 100% ETH, matching paper&rsquo;s description). Total pool ETH includes the 3.01 fees. LP2 remains inactive (price moved further away). LP3 is now at its lower bound and will activate for the next upward trade.</li>
</ul>
<h4 id="transaction-2-swap-eth-for-btc-to-move-price-from-16-to-20">Transaction 2: Swap ETH for BTC to Move Price from 16 to 20<a class="anchor" href="#transaction-2-swap-eth-for-btc-to-move-price-from-16-to-20">#</a></h4>
<ul>
<li><strong>Description</strong>: Another trader (or continuation) inputs ETH to buy BTC, moving price to 20 ETH per BTC. This uses LP3&rsquo;s liquidity (activated at 16). LP1 remains inactive.</li>
<li><strong>Input</strong>: 473.56 ETH (gross; trader pays this to the pool).</li>
<li><strong>Output</strong>: 26.39 BTC.</li>
<li><strong>Fees paid</strong>: 1.42 ETH (0.3% of input; accrued to LP3 as it was active during the trade).</li>
<li><strong>New price</strong>: 20 ETH per BTC.</li>
<li><strong>New pool reserves</strong>: 23.61 BTC, 3476.57 ETH.</li>
<li><strong>New position details</strong> (real reserves are base formula values; accrued fees are extra claimable by LPs but remain in pool reserves):
<table>
  <thead>
      <tr>
          <th>LP</th>
          <th>L (Position Size)</th>
          <th>Range [p_a, p_b]</th>
          <th>Real Reserves (BTC)</th>
          <th>Real Reserves (ETH)</th>
          <th>Status</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>LP1</td>
          <td>1000</td>
          <td>[4, 16]</td>
          <td>0</td>
          <td>2000 (+3.01 fees)</td>
          <td>Inactive</td>
      </tr>
      <tr>
          <td>LP2</td>
          <td>1000</td>
          <td>[1, 4]</td>
          <td>0</td>
          <td>1000</td>
          <td>Inactive</td>
      </tr>
      <tr>
          <td>LP3</td>
          <td>1000</td>
          <td>[16, 25]</td>
          <td>23.61</td>
          <td>472.14 (+1.42 fees)</td>
          <td>Active (activated)</td>
      </tr>
  </tbody>
</table>
</li>
<li><strong>Notes</strong>: LP3 activated as price entered its range (providing the virtual curve for trading). LP1 stayed inactive (price is now outside [4,16]). LP2 remained inactive (price is even further above its range). Total pool ETH includes cumulative fees (4.43 ETH total across transactions). If price reversed downward, LP3 could deactivate, and LP1 could reactivate.</li>
</ul>
<p>This example demonstrates the paper&rsquo;s key concepts: LPs concentrate liquidity in custom ranges for efficiency, positions activate/deactivate based on current price (allowing market-driven allocation), and inactive positions hold single assets without contributing to trades. In a real BTC/ETH pool, similar dynamics apply, but with discrete ticks and real prices (e.g., around 20 ETH per BTC). If the price moved downward instead, it could deactivate LP1 and potentially activate LP2. For more details or variations, see Equations 2.1–2.2 and Figures 1–3 in the paper.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">

<div>

</div>

<div>

</div>

</div>





  
  
  
  <div class="flex flex-wrap justify-between">
    <span>
    
      <a href="http://localhost:1313/defischolar_site/docs/uniswap/impermanent_loss/" class="flex align-center">
        <img src="http://localhost:1313/defischolar_site/icons/backward.svg" class="book-icon" alt="Backward" />
        <span>Impermanent Loss</span>
      </a>
    
    </span>
    <span>
    
      <a href="http://localhost:1313/defischolar_site/docs/uniswap/multiple_pools/" class="flex align-center">
        <span>Multiple Pools</span>
        <img src="http://localhost:1313/defischolar_site/icons/forward.svg" class="book-icon" alt="Forward" />
      </a>
    
    </span>
  </div>
  


 
        
  
  <div class="book-comments">

</div>
  
 
        
        
  
 
        
  
  
    <script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script>
  

      </footer>

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  
  <aside class="book-toc">
    <div class="book-toc-content">
      
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#example-illustration-of-concentrated-liquidity-in-uniswap-v3-btceth-pair">Example Illustration of Concentrated Liquidity in Uniswap v3 (BTC/ETH Pair)</a></li>
      </ul>
    </li>
  </ul>
</nav>



    </div>
  </aside>
  
 
  </main>

  
<script src="http://localhost:1313/defischolar_site/js/theme-toggle-logic.js" defer></script>

<script src="https://unpkg.com/lucide@0.257.0/dist/lucide.min.js" defer></script>
<script defer>document.addEventListener('DOMContentLoaded', function(){ if (window.lucide && lucide.replace) { lucide.replace(); } });</script>

</body>
</html>




















